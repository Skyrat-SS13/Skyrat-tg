<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/machinery/firealarm - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/machinery/firealarm.html#var">Var Details</a> - <a href="obj/machinery/firealarm.html#proc">Proc Details</a></header><main><h1>firealarm <aside>/<a href="obj.html">obj</a>/<a href="obj/machinery.html">machinery</a>/<a href="obj/machinery/firealarm.html">firealarm</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/game/machinery/firealarm.dm#L13"><img src="git.png" width="16" height="16" title="code/game/machinery/firealarm.dm 13"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/machinery/firealarm.html#var/buildstage">buildstage</a></th><td>Buildstate for contruction steps</td></tr><tr><th><a href="obj/machinery/firealarm.html#var/my_area">my_area</a></th><td>Our home area, set in Init. Due to loading step order, this seems to be null very early in the server setup process, which is why some procs use <code>my_area?</code> for var or list checks.</td></tr><tr><th><a href="obj/machinery/firealarm.html#var/soundloop">soundloop</a></th><td>looping sound datum for our fire alarm siren.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/machinery/firealarm.html#proc/alarm">alarm</a></th><td>Sounds the fire alarm and closes all firelocks in the area. Also tells the area to color the lights red.</td></tr><tr><th><a href="obj/machinery/firealarm.html#proc/check_security_level">check_security_level</a></th><td>Signal handler for checking if we should update fire alarm appearance accordingly to a newly set security level</td></tr><tr><th><a href="obj/machinery/firealarm.html#proc/reset">reset</a></th><td>Resets all firelocks in the area. Also tells the area to disable alarm lighting, if it was enabled.</td></tr><tr><th><a href="obj/machinery/firealarm.html#proc/set_status">set_status</a></th><td>Sets the sound state, and then calls update_icon()</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/buildstage"><aside class="declaration">var </aside>buildstage <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/game/machinery/firealarm.dm#L33"><img src="git.png" width="16" height="16" title="code/game/machinery/firealarm.dm 33"></a></h3><p>Buildstate for contruction steps</p><h3 id="var/my_area"><aside class="declaration">var </aside>my_area <aside>– /<a href="area.html">area</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/game/machinery/firealarm.dm#L35"><img src="git.png" width="16" height="16" title="code/game/machinery/firealarm.dm 35"></a></h3><p>Our home area, set in Init. Due to loading step order, this seems to be null very early in the server setup process, which is why some procs use <code>my_area?</code> for var or list checks.</p><h3 id="var/soundloop"><aside class="declaration">var </aside>soundloop <aside>– /<a href="datum.html">datum</a>/<a href="datum/looping_sound.html">looping_sound</a>/firealarm</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/game/machinery/firealarm.dm#L39"><img src="git.png" width="16" height="16" title="code/game/machinery/firealarm.dm 39"></a></h3><p>looping sound datum for our fire alarm siren.</p><h2 id="proc">Proc Details</h2><h3 id="proc/alarm"><aside class="declaration">proc </aside>alarm<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/game/machinery/firealarm.dm#L242"><img src="git.png" width="16" height="16" title="code/game/machinery/firealarm.dm 242"></a></aside></h3><p>Sounds the fire alarm and closes all firelocks in the area. Also tells the area to color the lights red.</p>
<p>Arguments:</p>
<ul>
<li>mob/user is the user that pulled the alarm.</li>
</ul><h3 id="proc/check_security_level"><aside class="declaration">proc </aside>check_security_level<aside>(/<a href="datum.html">datum</a>/source, new_level)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/game/machinery/firealarm.dm#L230"><img src="git.png" width="16" height="16" title="code/game/machinery/firealarm.dm 230"></a></aside></h3><p>Signal handler for checking if we should update fire alarm appearance accordingly to a newly set security level</p>
<p>Arguments:</p>
<ul>
<li>source The datum source of the signal</li>
<li>new_level The new security level that is in effect</li>
</ul><h3 id="proc/reset"><aside class="declaration">proc </aside>reset<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/game/machinery/firealarm.dm#L267"><img src="git.png" width="16" height="16" title="code/game/machinery/firealarm.dm 267"></a></aside></h3><p>Resets all firelocks in the area. Also tells the area to disable alarm lighting, if it was enabled.</p>
<p>Arguments:</p>
<ul>
<li>mob/user is the user that reset the alarm.</li>
</ul><h3 id="proc/set_status"><aside class="declaration">proc </aside>set_status<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/game/machinery/firealarm.dm#L141"><img src="git.png" width="16" height="16" title="code/game/machinery/firealarm.dm 141"></a></aside></h3><p>Sets the sound state, and then calls update_icon()</p>
<p>This proc exists to be called by areas and firelocks
so that it may update its icon and start or stop playing
the alarm sound based on the state of an area variable.</p></main><footer>tgstation.dme <a href="https://github.com/Skyrat-SS13/Skyrat-tg/tree/e507f9120bb0c3beecfe169d14193d90e7229a58">e507f91</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>