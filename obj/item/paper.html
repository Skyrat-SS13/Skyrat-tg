<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/item/paper - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/item/paper.html#var">Var Details</a> - <a href="obj/item/paper.html#proc">Proc Details</a></header><main><h1>paper <aside>/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/<a href="obj/item/paper.html">paper</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L13"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 13"></a></h1><p>Paper
also scraps of paper</p>
<p>lipstick wiping is in code/game/objects/items/weapons/cosmetics.dm!</p>
<p>Paper is now using markdown (like in github pull notes) for ALL rendering
so we do loose a bit of functionality but we gain in easy of use of
paper and getting rid of that crashing bug</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/item/paper.html#var/camera_holder">camera_holder</a></th><td>Paper can be shown via cameras. When that is done, a deep copy of the paper is made and stored as a var on the camera.
The paper is located in nullspace, and holds a weak ref to the camera that once contained it so the paper can do some
state checking on if it should be shown to a viewer.</td></tr><tr><th><a href="obj/item/paper.html#var/can_become_message_in_bottle">can_become_message_in_bottle</a></th><td>If this paper can be selected as a candidate for a future message in a bottle when spawned outside of mapload. Doesn't affect manually doing that.</td></tr><tr><th><a href="obj/item/paper.html#var/contact_poison">contact_poison</a></th><td>Reagent to transfer to the user when they pick the paper up without proper protection.</td></tr><tr><th><a href="obj/item/paper.html#var/contact_poison_volume">contact_poison_volume</a></th><td>Volume of contact_poison to transfer to the user when they pick the paper up without proper protection.</td></tr><tr><th><a href="obj/item/paper.html#var/default_raw_text">default_raw_text</a></th><td>Default raw text to fill this paper with on init.</td></tr><tr><th><a href="obj/item/paper.html#var/input_field_count">input_field_count</a></th><td>The number of input fields</td></tr><tr><th><a href="obj/item/paper.html#var/raw_field_input_data">raw_field_input_data</a></th><td>Lazylist of all fields that have had some input added to them.</td></tr><tr><th><a href="obj/item/paper.html#var/raw_stamp_data">raw_stamp_data</a></th><td>Lazylist of all raw stamp data to be sent to tgui.</td></tr><tr><th><a href="obj/item/paper.html#var/raw_text_inputs">raw_text_inputs</a></th><td>Lazylist of raw, unsanitised, unparsed text inputs that have been made to the paper.</td></tr><tr><th><a href="obj/item/paper.html#var/request_state">request_state</a></th><td>If TRUE, staff can read paper everywhere, but usually from requests panel.</td></tr><tr><th><a href="obj/item/paper.html#var/show_written_words">show_written_words</a></th><td>Whether the icon should show little scribbly written words when the paper has some text on it.</td></tr><tr><th><a href="obj/item/paper.html#var/stamp_cache">stamp_cache</a></th><td>Helper cache that contains a list of all icon_states that are currently stamped on the paper.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/item/paper.html#proc/add_field_input">add_field_input</a></th><td>This simple helper adds the supplied input field data to the paper.</td></tr><tr><th><a href="obj/item/paper.html#proc/add_raw_text">add_raw_text</a></th><td>This simple helper adds the supplied raw text to the paper, appending to the end of any existing contents.</td></tr><tr><th><a href="obj/item/paper.html#proc/add_stamp">add_stamp</a></th><td>This simple helper adds the supplied stamp to the paper, appending to the end of any existing stamps.</td></tr><tr><th><a href="obj/item/paper.html#proc/clear_paper">clear_paper</a></th><td>Removes all input and all stamps from the paper, clearing it completely.</td></tr><tr><th><a href="obj/item/paper.html#proc/copy">copy</a></th><td>This proc copies this sheet of paper to a new
sheet. Used by carbon papers and the photocopier machine.</td></tr><tr><th><a href="obj/item/paper.html#proc/copy_field_text">copy_field_text</a></th><td>Returns a deep copy list of raw_field_input_data, or null if the list is empty or doesn't exist.</td></tr><tr><th><a href="obj/item/paper.html#proc/copy_raw_stamps">copy_raw_stamps</a></th><td>Returns a deep copy list of raw_stamp_data, or null if the list is empty or doesn't exist. Does not copy overlays or stamp_cache, only the tgui rendered stamps.</td></tr><tr><th><a href="obj/item/paper.html#proc/copy_raw_text">copy_raw_text</a></th><td>Returns a deep copy list of raw_text_inputs, or null if the list is empty or doesn't exist.</td></tr><tr><th><a href="obj/item/paper.html#proc/get_raw_text">get_raw_text</a></th><td>Get a single string representing the text on a page</td></tr><tr><th><a href="obj/item/paper.html#proc/is_empty">is_empty</a></th><td>Determines whether this paper has been written or stamped to.</td></tr><tr><th><a href="obj/item/paper.html#proc/item_interaction_secondary">item_interaction_secondary</a></th><td>Secondary right click interaction to quickly stamp things</td></tr><tr><th><a href="obj/item/paper.html#proc/make_plane">make_plane</a></th><td>Paper plane folding
Makes a paperplane depending on args and returns it.</td></tr><tr><th><a href="obj/item/paper.html#proc/show_through_camera">show_through_camera</a></th><td>Attempts to ui_interact the paper to the given user, with some sanity checking
to make sure the camera still exists via the weakref and that this paper is still
attached to it.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/camera_holder"><aside class="declaration">var </aside>camera_holder <aside>– /<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L62"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 62"></a></h3><p>Paper can be shown via cameras. When that is done, a deep copy of the paper is made and stored as a var on the camera.
The paper is located in nullspace, and holds a weak ref to the camera that once contained it so the paper can do some
state checking on if it should be shown to a viewer.</p><h3 id="var/can_become_message_in_bottle"><aside class="declaration">var </aside>can_become_message_in_bottle <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L68"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 68"></a></h3><p>If this paper can be selected as a candidate for a future message in a bottle when spawned outside of mapload. Doesn't affect manually doing that.</p><h3 id="var/contact_poison"><aside class="declaration">var </aside>contact_poison <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L49"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 49"></a></h3><p>Reagent to transfer to the user when they pick the paper up without proper protection.</p><h3 id="var/contact_poison_volume"><aside class="declaration">var </aside>contact_poison_volume <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L51"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 51"></a></h3><p>Volume of contact_poison to transfer to the user when they pick the paper up without proper protection.</p><h3 id="var/default_raw_text"><aside class="declaration">var </aside>default_raw_text <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L54"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 54"></a></h3><p>Default raw text to fill this paper with on init.</p><h3 id="var/input_field_count"><aside class="declaration">var </aside>input_field_count <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L57"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 57"></a></h3><p>The number of input fields</p><h3 id="var/raw_field_input_data"><aside class="declaration">var </aside>raw_field_input_data <aside>– /list/datum/paper_field</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L40"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 40"></a></h3><p>Lazylist of all fields that have had some input added to them.</p><h3 id="var/raw_stamp_data"><aside class="declaration">var </aside>raw_stamp_data <aside>– /list/datum/paper_stamp</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L38"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 38"></a></h3><p>Lazylist of all raw stamp data to be sent to tgui.</p><h3 id="var/raw_text_inputs"><aside class="declaration">var </aside>raw_text_inputs <aside>– /list/datum/paper_input</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L36"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 36"></a></h3><p>Lazylist of raw, unsanitised, unparsed text inputs that have been made to the paper.</p><h3 id="var/request_state"><aside class="declaration">var </aside>request_state <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L65"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 65"></a></h3><p>If TRUE, staff can read paper everywhere, but usually from requests panel.</p><h3 id="var/show_written_words"><aside class="declaration">var </aside>show_written_words <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L43"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 43"></a></h3><p>Whether the icon should show little scribbly written words when the paper has some text on it.</p><h3 id="var/stamp_cache"><aside class="declaration">var </aside>stamp_cache <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L46"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 46"></a></h3><p>Helper cache that contains a list of all icon_states that are currently stamped on the paper.</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_field_input"><aside class="declaration">proc </aside>add_field_input<aside>(field_id, text, font, color, bold, signature_name, overwrite)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L211"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 211"></a></aside></h3><p>This simple helper adds the supplied input field data to the paper.</p>
<p>It will not overwrite any existing input field data by default and will early return FALSE if this scenario happens unless overwrite is
set properly.</p>
<p>Other than that, this is a God proc that does not care about max length or out-of-range IDs and expects sanity checking beforehand if
you want to respect it.</p>
<ul>
<li>Arguments:</li>
<li>field_id - The ID number of the field to which this data applies.</li>
<li>text - The text to append to the paper.</li>
<li>font - The font to use.</li>
<li>color - The font color to use.</li>
<li>bold - Whether this text should be rendered completely bold.</li>
<li>overwrite - If TRUE, will overwrite existing field ID's data if it exists.</li>
</ul><h3 id="proc/add_raw_text"><aside class="declaration">proc </aside>add_raw_text<aside>(text, font, color, bold, advanced_html)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L181"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 181"></a></aside></h3><p>This simple helper adds the supplied raw text to the paper, appending to the end of any existing contents.</p>
<p>This a God proc that does not care about paper max length and expects sanity checking beforehand if you want to respect it.</p>
<p>The caller is expected to handle updating icons and appearance after adding text, to allow for more efficient batch adding loops.</p>
<ul>
<li>Arguments:</li>
<li>text - The text to append to the paper.</li>
<li>font - The font to use.</li>
<li>color - The font color to use.</li>
<li>bold - Whether this text should be rendered completely bold.</li>
<li>advanced_html - Boolean that is true when the writer has R_FUN permission, which sanitizes less HTML (such as images) from the new paper_input</li>
</ul><h3 id="proc/add_stamp"><aside class="declaration">proc </aside>add_stamp<aside>(stamp_class, stamp_x, stamp_y, rotation, stamp_icon_state)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L274"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 274"></a></aside></h3><p>This simple helper adds the supplied stamp to the paper, appending to the end of any existing stamps.</p>
<p>This a God proc that does not care about stamp max count and expects sanity checking beforehand if you want to respect it.</p>
<p>It does however respect the overlay limit and will not apply any overlays past the cap.</p>
<p>The caller is expected to handle updating icons and appearance after adding text, to allow for more efficient batch adding loops.</p>
<ul>
<li>Arguments:</li>
<li>stamp_class - Div class for the stamp.</li>
<li>stamp_x - X coordinate to render the stamp in tgui.</li>
<li>stamp_y - Y coordinate to render the stamp in tgui.</li>
<li>rotation - Degrees of rotation for the stamp to be rendered with in tgui.</li>
<li>stamp_icon_state - Icon state for the stamp as part of overlay rendering.</li>
</ul><h3 id="proc/clear_paper"><aside class="declaration">proc </aside>clear_paper<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L288"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 288"></a></aside></h3><p>Removes all input and all stamps from the paper, clearing it completely.</p><h3 id="proc/copy"><aside class="declaration">proc </aside>copy<aside>(paper_type, /<a href="atom.html">atom</a>/location, colored, greyscale_override)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L139"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 139"></a></aside></h3><p>This proc copies this sheet of paper to a new
sheet. Used by carbon papers and the photocopier machine.</p>
<p>Arguments</p>
<ul>
<li>paper_type - Type path of the new paper to create. Can copy anything to anything.</li>
<li>location - Where to spawn in the new copied paper.</li>
<li>colored - If true, the copied paper will be coloured and will inherit all colours.</li>
<li>greyscale_override - If set to a colour string and coloured is false, it will override the default of COLOR_WEBSAFE_DARK_GRAY when copying.</li>
</ul><h3 id="proc/copy_field_text"><aside class="declaration">proc </aside>copy_field_text<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L106"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 106"></a></aside></h3><p>Returns a deep copy list of raw_field_input_data, or null if the list is empty or doesn't exist.</p><h3 id="proc/copy_raw_stamps"><aside class="declaration">proc </aside>copy_raw_stamps<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L118"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 118"></a></aside></h3><p>Returns a deep copy list of raw_stamp_data, or null if the list is empty or doesn't exist. Does not copy overlays or stamp_cache, only the tgui rendered stamps.</p><h3 id="proc/copy_raw_text"><aside class="declaration">proc </aside>copy_raw_text<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L94"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 94"></a></aside></h3><p>Returns a deep copy list of raw_text_inputs, or null if the list is empty or doesn't exist.</p><h3 id="proc/get_raw_text"><aside class="declaration">proc </aside>get_raw_text<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L757"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 757"></a></aside></h3><p>Get a single string representing the text on a page</p><h3 id="proc/is_empty"><aside class="declaration">proc </aside>is_empty<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L90"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 90"></a></aside></h3><p>Determines whether this paper has been written or stamped to.</p><h3 id="proc/item_interaction_secondary"><aside class="parent"><a title="/atom" href="atom.html#proc/item_interaction_secondary">↑</a></aside>item_interaction_secondary<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user, /<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/tool, /list/modifiers)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L474"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 474"></a></aside></h3><p>Secondary right click interaction to quickly stamp things</p><h3 id="proc/make_plane"><aside class="declaration">proc </aside>make_plane<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user, plane_type)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L396"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 396"></a></aside></h3><p>Paper plane folding
Makes a paperplane depending on args and returns it.</p>
<p>Arguments:</p>
<ul>
<li>mob/living/user - who's folding</li>
<li>plane_type - what it will be folded into (path)</li>
</ul><h3 id="proc/show_through_camera"><aside class="declaration">proc </aside>show_through_camera<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/user)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/paperwork/paper.dm#L497"><img src="git.png" width="16" height="16" title="code/modules/paperwork/paper.dm 497"></a></aside></h3><p>Attempts to ui_interact the paper to the given user, with some sanity checking
to make sure the camera still exists via the weakref and that this paper is still
attached to it.</p></main><footer>tgstation.dme <a href="https://github.com/Skyrat-SS13/Skyrat-tg/tree/e507f9120bb0c3beecfe169d14193d90e7229a58">e507f91</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>