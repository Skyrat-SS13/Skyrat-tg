<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/brain_trauma/severe/death_consequences - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> â€” <a href="datum/brain_trauma/severe/death_consequences.html#var">Var Details</a> - <a href="datum/brain_trauma/severe/death_consequences.html#proc">Proc Details</a></header><main><h1>death_consequences <aside>/<a href="datum.html">datum</a>/<a href="datum/brain_trauma.html">brain_trauma</a>/<a href="datum/brain_trauma/severe/death_consequences.html">severe/death_consequences</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L15"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 15"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/base_degradation_on_death">base_degradation_on_death</a></th><td>When our victim dies, they will degrade by this amount, but only if the last time they died was after [time_required_between_deaths_to_degrade] ago.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/base_degradation_per_second_while_dead">base_degradation_per_second_while_dead</a></th><td>While dead, our victim will degrade by this amount every second. Reduced by stasis and formeldahyde.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/base_degradation_reduction_per_second_while_alive">base_degradation_reduction_per_second_while_alive</a></th><td>While alive, our victim will lose degradation by this amount per second.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/buckled_to_default_mult">buckled_to_default_mult</a></th><td>Only used if the thing we are buckled to is not in [buckled_to_recovery_mult_table].</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/buckled_to_recovery_mult_table">buckled_to_recovery_mult_table</a></th><td>A assoc list of (atom/movable typepath -&gt; mult), where mult is used as a multiplier against passive living degradation reduction.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/crit_threshold_currently_reduced_by">crit_threshold_currently_reduced_by</a></th><td>Used for updating our crit threshold reduction. We store the previous value, then subtract it from crit threshold, to get the value we had before we adjusted.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/crit_threshold_max_degradation">crit_threshold_max_degradation</a></th><td>The degradation we will stop reducing the crit threshold at.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/crit_threshold_min_degradation">crit_threshold_min_degradation</a></th><td>The degradation we will begin reducing the crit threshold at.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/current_degradation">current_degradation</a></th><td>The current degradation we are currently at. Generally speaking, things get worse the higher this is. Can never go below 0.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/current_degradation_level">current_degradation_level</a></th><td>The current level of degradation. Used mostly for reminder messages.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/degradation_messages">degradation_messages</a></th><td>The random messages that will be sent to our victim if their degradation moves to a new threshold.
Contains nested assoc lists of (DEGRADATION_LEVEL_DEFINE -&gt; list((message -&gt; weight), ...)) where ... is a indefinite number of message -&gt; weight pairs.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/eigenstasium_degradation_decrease">eigenstasium_degradation_decrease</a></th><td>When eigenstasium is metabolized, degradation is reduced by this.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/final_death_delivered">final_death_delivered</a></th><td>If we have killed our owner permanently.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/force_death_if_permakilled">force_death_if_permakilled</a></th><td>If true, when [current_degradation] reaches [max_degradation], we will DNR and KILL our victim.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/formaldehyde_death_degradation_mult">formaldehyde_death_degradation_mult</a></th><td>If our victim is dead, their passive degradation will be multiplied against this if they have formal in their system.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/last_time_degraded_on_death">last_time_degraded_on_death</a></th><td>The last time we caused immediate degradation on death.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/max_crit_threshold_reduction">max_crit_threshold_reduction</a></th><td>The amount our victims crit threshold will be reduced by at [crit_threshold_max_degradation] degradation.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/max_degradation">max_degradation</a></th><td>The absolute maximum degradation we can receive. Will cause permadeath if [permakill_if_at_max_degradation] is TRUE.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/max_stamina_damage">max_stamina_damage</a></th><td>The amount our victims crit threshold will be reduced by at [stamina_damage_max_degradation] degradation.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/permakill_if_at_max_degradation">permakill_if_at_max_degradation</a></th><td>If true, when [current_degradation] reaches [max_degradation], we will DNR and ghost our victim.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/rezadone_degradation_decrease">rezadone_degradation_decrease</a></th><td>If our victim is alive and is metabolizing rezadone, we will reduce degradation by this amount every second.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/stamina_damage_max_degradation">stamina_damage_max_degradation</a></th><td>The degradation we will stop increasing the stamina damage at.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/stamina_damage_minimum_degradation">stamina_damage_minimum_degradation</a></th><td>The degradation we will begin applying stamina damage at.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/stasis_passive_degradation_multiplier">stasis_passive_degradation_multiplier</a></th><td>If our victim is dead, their passive degradation will be multiplied against this if they are in stasis.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/time_between_reminders">time_between_reminders</a></th><td>The time between each reminder ([degradation_messages]).</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/time_of_last_message_sent">time_of_last_message_sent</a></th><td>The last world.time we sent a message to our owner reminding them of their current degradation. Used for cooldowns and such.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/time_required_between_deaths_to_degrade">time_required_between_deaths_to_degrade</a></th><td>If the last time we degraded on death was less than this time ago, we won't immediately degrade when our victim dies. Used for preventing things like MDs constantly reviving someone and PKing them.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/time_til_scan_expires">time_til_scan_expires</a></th><td>Assoc list of (mob -&gt; world.time + time_to_view_extra_data_after_scan). Used for determining if someone can use our health analyzer href</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#var/time_to_view_extra_data_after_scan">time_to_view_extra_data_after_scan</a></th><td>The amount of time someone has to view our extra info via health analyzer after scanning us.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/adjust_degradation">adjust_degradation</a></th><td>Setter proc for [current_degradation] that clamps the incoming value and updates effects if the value changed.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/and_so_your_story_ends">and_so_your_story_ends</a></th><td>The proc we call when we permanently kill our victim due to being at maximum degradation. DNRs them, ghosts/kills them, and prints a series of highly dramatic messages,
befitting for a death such as this.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/damage_stamina">damage_stamina</a></th><td>Ensures our victim's stamina is at or above the minimum stamina they're supposed to have.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/get_crit_threshold_adjustment">get_crit_threshold_adjustment</a></th><td>Calculates the amount that we should add to our victim's critical threshold.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/get_health_analyzer_link_text">get_health_analyzer_link_text</a></th><td>Returns a short-ish string containing an href to [get_specific_data].</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/get_passive_degradation_decrease">get_passive_degradation_decrease</a></th><td>Returns the amount, every second, degradation should DECREASE by.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/get_passive_degradation_decrease_mult">get_passive_degradation_decrease_mult</a></th><td>Returns a multiplier that should be used whenever degradation is passively decreased. Is determined by resting, sleeping, and buckled status.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/get_passive_degradation_increase">get_passive_degradation_increase</a></th><td>Returns the amount, every second, degradation should INCREASE by.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/get_specific_data">get_specific_data</a></th><td>Returns a large string intended to show specifics of how this degradation work.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/send_reminder">send_reminder</a></th><td>Sends a flavorful to_chat to the target, picking from degradation_messages[current_degradation_level]. Can fail to send one if no message is found.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/update_degradation_level">update_degradation_level</a></th><td>Updates [current_degradation_level] by comparing current degradation to max.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/update_effects">update_effects</a></th><td>Refreshes all our effects and updates their values. Kills the victim if they opted in and their degradation equals their maximum.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/update_variables">update_variables</a></th><td>Resets all our variables to our victim's preferences, if they have any. Used for the initial setup, then any time our victim manually refreshes variables.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/victim_ahealed">victim_ahealed</a></th><td>Signal handler proc for healing our victim on an aheal. Permadeath can only be reversed by admin aheals.</td></tr><tr><th><a href="datum/brain_trauma/severe/death_consequences.html#proc/victim_properly_resting">victim_properly_resting</a></th><td>Used in stamina damage. Determines if our victim is resting, sleeping, or is buckled to something cozy.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/base_degradation_on_death"><aside class="declaration">var </aside>base_degradation_on_death <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L30"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 30"></a></h3><p>When our victim dies, they will degrade by this amount, but only if the last time they died was after [time_required_between_deaths_to_degrade] ago.</p><h3 id="var/base_degradation_per_second_while_dead"><aside class="declaration">var </aside>base_degradation_per_second_while_dead <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L32"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 32"></a></h3><p>While dead, our victim will degrade by this amount every second. Reduced by stasis and formeldahyde.</p><h3 id="var/base_degradation_reduction_per_second_while_alive"><aside class="declaration">var </aside>base_degradation_reduction_per_second_while_alive <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L28"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 28"></a></h3><p>While alive, our victim will lose degradation by this amount per second.</p><h3 id="var/buckled_to_default_mult"><aside class="declaration">var </aside>buckled_to_default_mult <aside>â€“ /static</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L98"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 98"></a></h3><p>Only used if the thing we are buckled to is not in [buckled_to_recovery_mult_table].</p><h3 id="var/buckled_to_recovery_mult_table"><aside class="declaration">var </aside>buckled_to_recovery_mult_table <aside>â€“ /static/list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L87"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 87"></a></h3><p>A assoc list of (atom/movable typepath -&gt; mult), where mult is used as a multiplier against passive living degradation reduction.</p><h3 id="var/crit_threshold_currently_reduced_by"><aside class="declaration">var </aside>crit_threshold_currently_reduced_by <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L74"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 74"></a></h3><p>Used for updating our crit threshold reduction. We store the previous value, then subtract it from crit threshold, to get the value we had before we adjusted.</p><h3 id="var/crit_threshold_max_degradation"><aside class="declaration">var </aside>crit_threshold_max_degradation <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L62"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 62"></a></h3><p>The degradation we will stop reducing the crit threshold at.</p><h3 id="var/crit_threshold_min_degradation"><aside class="declaration">var </aside>crit_threshold_min_degradation <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L60"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 60"></a></h3><p>The degradation we will begin reducing the crit threshold at.</p><h3 id="var/current_degradation"><aside class="declaration">var </aside>current_degradation <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L24"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 24"></a></h3><p>The current degradation we are currently at. Generally speaking, things get worse the higher this is. Can never go below 0.</p><h3 id="var/current_degradation_level"><aside class="declaration">var </aside>current_degradation_level <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L82"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 82"></a></h3><p>The current level of degradation. Used mostly for reminder messages.</p><h3 id="var/degradation_messages"><aside class="declaration">var </aside>degradation_messages <aside>â€“ /static/list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L102"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 102"></a></h3><p>The random messages that will be sent to our victim if their degradation moves to a new threshold.
Contains nested assoc lists of (DEGRADATION_LEVEL_DEFINE -&gt; list((message -&gt; weight), ...)) where ... is a indefinite number of message -&gt; weight pairs.</p><h3 id="var/eigenstasium_degradation_decrease"><aside class="declaration">var </aside>eigenstasium_degradation_decrease <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L45"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 45"></a></h3><p>When eigenstasium is metabolized, degradation is reduced by this.</p><h3 id="var/final_death_delivered"><aside class="declaration">var </aside>final_death_delivered <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L56"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 56"></a></h3><p>If we have killed our owner permanently.</p><h3 id="var/force_death_if_permakilled"><aside class="declaration">var </aside>force_death_if_permakilled <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L53"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 53"></a></h3><p>If true, when [current_degradation] reaches [max_degradation], we will DNR and KILL our victim.</p><h3 id="var/formaldehyde_death_degradation_mult"><aside class="declaration">var </aside>formaldehyde_death_degradation_mult <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L40"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 40"></a></h3><p>If our victim is dead, their passive degradation will be multiplied against this if they have formal in their system.</p><h3 id="var/last_time_degraded_on_death"><aside class="declaration">var </aside>last_time_degraded_on_death <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L35"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 35"></a></h3><p>The last time we caused immediate degradation on death.</p><h3 id="var/max_crit_threshold_reduction"><aside class="declaration">var </aside>max_crit_threshold_reduction <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L64"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 64"></a></h3><p>The amount our victims crit threshold will be reduced by at [crit_threshold_max_degradation] degradation.</p><h3 id="var/max_degradation"><aside class="declaration">var </aside>max_degradation <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L26"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 26"></a></h3><p>The absolute maximum degradation we can receive. Will cause permadeath if [permakill_if_at_max_degradation] is TRUE.</p><h3 id="var/max_stamina_damage"><aside class="declaration">var </aside>max_stamina_damage <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L71"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 71"></a></h3><p>The amount our victims crit threshold will be reduced by at [stamina_damage_max_degradation] degradation.</p><h3 id="var/permakill_if_at_max_degradation"><aside class="declaration">var </aside>permakill_if_at_max_degradation <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L51"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 51"></a></h3><p>If true, when [current_degradation] reaches [max_degradation], we will DNR and ghost our victim.</p><h3 id="var/rezadone_degradation_decrease"><aside class="declaration">var </aside>rezadone_degradation_decrease <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L42"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 42"></a></h3><p>If our victim is alive and is metabolizing rezadone, we will reduce degradation by this amount every second.</p><h3 id="var/stamina_damage_max_degradation"><aside class="declaration">var </aside>stamina_damage_max_degradation <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L69"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 69"></a></h3><p>The degradation we will stop increasing the stamina damage at.</p><h3 id="var/stamina_damage_minimum_degradation"><aside class="declaration">var </aside>stamina_damage_minimum_degradation <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L67"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 67"></a></h3><p>The degradation we will begin applying stamina damage at.</p><h3 id="var/stasis_passive_degradation_multiplier"><aside class="declaration">var </aside>stasis_passive_degradation_multiplier <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L48"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 48"></a></h3><p>If our victim is dead, their passive degradation will be multiplied against this if they are in stasis.</p><h3 id="var/time_between_reminders"><aside class="declaration">var </aside>time_between_reminders <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L79"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 79"></a></h3><p>The time between each reminder ([degradation_messages]).</p><h3 id="var/time_of_last_message_sent"><aside class="declaration">var </aside>time_of_last_message_sent <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L77"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 77"></a></h3><p>The last world.time we sent a message to our owner reminding them of their current degradation. Used for cooldowns and such.</p><h3 id="var/time_required_between_deaths_to_degrade"><aside class="declaration">var </aside>time_required_between_deaths_to_degrade <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L37"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 37"></a></h3><p>If the last time we degraded on death was less than this time ago, we won't immediately degrade when our victim dies. Used for preventing things like MDs constantly reviving someone and PKing them.</p><h3 id="var/time_til_scan_expires"><aside class="declaration">var </aside>time_til_scan_expires <aside>â€“ /list/mob</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L130"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 130"></a></h3><p>Assoc list of (mob -&gt; world.time + time_to_view_extra_data_after_scan). Used for determining if someone can use our health analyzer href</p><h3 id="var/time_to_view_extra_data_after_scan"><aside class="declaration">var </aside>time_to_view_extra_data_after_scan <aside>â€“ </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L132"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 132"></a></h3><p>The amount of time someone has to view our extra info via health analyzer after scanning us.</p><h2 id="proc">Proc Details</h2><h3 id="proc/adjust_degradation"><aside class="declaration">proc </aside>adjust_degradation<aside>(adjustment)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L267"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 267"></a></aside></h3><p>Setter proc for [current_degradation] that clamps the incoming value and updates effects if the value changed.</p><h3 id="proc/and_so_your_story_ends"><aside class="declaration">proc </aside>and_so_your_story_ends<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L367"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 367"></a></aside></h3><p>The proc we call when we permanently kill our victim due to being at maximum degradation. DNRs them, ghosts/kills them, and prints a series of highly dramatic messages,
befitting for a death such as this.</p><h3 id="proc/damage_stamina"><aside class="declaration">proc </aside>damage_stamina<aside>(seconds_per_tick)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L323"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 323"></a></aside></h3><p>Ensures our victim's stamina is at or above the minimum stamina they're supposed to have.</p><h3 id="proc/get_crit_threshold_adjustment"><aside class="declaration">proc </aside>get_crit_threshold_adjustment<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L309"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 309"></a></aside></h3><p>Calculates the amount that we should add to our victim's critical threshold.</p><h3 id="proc/get_health_analyzer_link_text"><aside class="declaration">proc </aside>get_health_analyzer_link_text<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L409"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 409"></a></aside></h3><p>Returns a short-ish string containing an href to [get_specific_data].</p><h3 id="proc/get_passive_degradation_decrease"><aside class="declaration">proc </aside>get_passive_degradation_decrease<aside>(is_dead)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L219"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 219"></a></aside></h3><p>Returns the amount, every second, degradation should DECREASE by.</p><h3 id="proc/get_passive_degradation_decrease_mult"><aside class="declaration">proc </aside>get_passive_degradation_decrease_mult<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L240"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 240"></a></aside></h3><p>Returns a multiplier that should be used whenever degradation is passively decreased. Is determined by resting, sleeping, and buckled status.</p><h3 id="proc/get_passive_degradation_increase"><aside class="declaration">proc </aside>get_passive_degradation_increase<aside>(is_dead)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L199"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 199"></a></aside></h3><p>Returns the amount, every second, degradation should INCREASE by.</p><h3 id="proc/get_specific_data"><aside class="declaration">proc </aside>get_specific_data<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L443"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 443"></a></aside></h3><p>Returns a large string intended to show specifics of how this degradation work.</p><h3 id="proc/send_reminder"><aside class="declaration">proc </aside>send_reminder<aside>(update_cooldown)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L351"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 351"></a></aside></h3><p>Sends a flavorful to_chat to the target, picking from degradation_messages[current_degradation_level]. Can fail to send one if no message is found.</p>
<p>Args:</p>
<ul>
<li>update_cooldown = TRUE: If true, updates [time_of_last_message_sent] to be world.time.</li>
</ul><h3 id="proc/update_degradation_level"><aside class="declaration">proc </aside>update_degradation_level<aside>(send_reminder_if_changed)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L280"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 280"></a></aside></h3><p>Updates [current_degradation_level] by comparing current degradation to max.</p>
<p>Args:</p>
<ul>
<li>send_reminder_if_changed = TRUE: If TRUE, will call [send_reminder()] if [current_degradation_level] is changed.</li>
</ul><h3 id="proc/update_effects"><aside class="declaration">proc </aside>update_effects<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L300"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 300"></a></aside></h3><p>Refreshes all our effects and updates their values. Kills the victim if they opted in and their degradation equals their maximum.</p><h3 id="proc/update_variables"><aside class="declaration">proc </aside>update_variables<aside>(/<a href="client.html">client</a>/source)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L496"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 496"></a></aside></h3><p>Resets all our variables to our victim's preferences, if they have any. Used for the initial setup, then any time our victim manually refreshes variables.</p><h3 id="proc/victim_ahealed"><aside class="declaration">proc </aside>victim_ahealed<aside>(/<a href="datum.html">datum</a>/signal_source, heal_flags)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L486"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 486"></a></aside></h3><p>Signal handler proc for healing our victim on an aheal. Permadeath can only be reversed by admin aheals.</p><h3 id="proc/victim_properly_resting"><aside class="declaration">proc </aside>victim_properly_resting<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm#L474"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/death_consequences_perk/death_consequences_trauma.dm 474"></a></aside></h3><p>Used in stamina damage. Determines if our victim is resting, sleeping, or is buckled to something cozy.</p></main><footer>tgstation.dme <a href="https://github.com/Skyrat-SS13/Skyrat-tg/tree/e507f9120bb0c3beecfe169d14193d90e7229a58">e507f91</a> (master) â€” <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>