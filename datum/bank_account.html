<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/bank_account - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/bank_account.html#var">Var Details</a> - <a href="datum/bank_account.html#proc">Proc Details</a></header><main><h1>bank_account <aside>/<a href="datum.html">datum</a>/<a href="datum/bank_account.html">bank_account</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L3"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 3"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/bank_account.html#var/account_balance">account_balance</a></th><td>How many credits are currently held in the bank account.</td></tr><tr><th><a href="datum/bank_account.html#var/account_debt">account_debt</a></th><td>Debt. If higher than 0, A portion of the credits is earned (or the whole debt, whichever is lower) will go toward paying it off.</td></tr><tr><th><a href="datum/bank_account.html#var/account_holder">account_holder</a></th><td>Name listed on the account, reflected on the ID card.</td></tr><tr><th><a href="datum/bank_account.html#var/account_id">account_id</a></th><td>The Unique ID number code associated with the owner's bank account, assigned at round start.</td></tr><tr><th><a href="datum/bank_account.html#var/account_job">account_job</a></th><td>The job datum of the account owner.</td></tr><tr><th><a href="datum/bank_account.html#var/add_to_accounts">add_to_accounts</a></th><td>Should this ID be added to the global list of accounts? If true, will be subject to station-bound economy effects as well as income.</td></tr><tr><th><a href="datum/bank_account.html#var/bank_cards">bank_cards</a></th><td>List of the physical ID card objects that are associated with this bank_account</td></tr><tr><th><a href="datum/bank_account.html#var/being_dumped">being_dumped</a></th><td>Is there a CRAB 17 on the station draining funds? Prevents manual fund transfer. pink levels are rising</td></tr><tr><th><a href="datum/bank_account.html#var/bitrunning_points">bitrunning_points</a></th><td>Points for bit runner's vendor. Awarded for completing virtual domains.</td></tr><tr><th><a href="datum/bank_account.html#var/bounties">bounties</a></th><td>If player is currently picking a civilian bounty to do, these options are held here to prevent soft-resetting through the UI.</td></tr><tr><th><a href="datum/bank_account.html#var/bounty_timer">bounty_timer</a></th><td>Cooldown timer on replacing a civilain bounty. Bounties can only be replaced once every 5 minutes.</td></tr><tr><th><a href="datum/bank_account.html#var/civilian_bounty">civilian_bounty</a></th><td>Reference to the current civilian bounty that the account is working on.</td></tr><tr><th><a href="datum/bank_account.html#var/last_ticket_luxury">last_ticket_luxury</a></th><td>Tracks if the last ticket we got was for luxury items, if this is true we get a normal food ticket</td></tr><tr><th><a href="datum/bank_account.html#var/mining_points">mining_points</a></th><td>How many mining points (shaft miner credits) is held in the bank account, used for mining vendors.</td></tr><tr><th><a href="datum/bank_account.html#var/pay_token">pay_token</a></th><td>A special semi-tandom token for tranfering money from NT pay app</td></tr><tr><th><a href="datum/bank_account.html#var/payday_modifier">payday_modifier</a></th><td>If there are things effecting how much income a player will get, it's reflected here 1 is standard for humans.</td></tr><tr><th><a href="datum/bank_account.html#var/redeemed_coupons">redeemed_coupons</a></th><td>A lazylist of coupons redeemed with the Coupon Master pda app associated with this account.</td></tr><tr><th><a href="datum/bank_account.html#var/replaceable">replaceable</a></th><td>Can this account be replaced? Set to true for default IDs not recognized by the station.</td></tr><tr><th><a href="datum/bank_account.html#var/tracked_ticket_book">tracked_ticket_book</a></th><td>Tracks a linked ration ticket book. If we have one of these, then we'll put tickets in it every payday.</td></tr><tr><th><a href="datum/bank_account.html#var/transaction_history">transaction_history</a></th><td>List with a transaction history for NT pay app</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/bank_account.html#proc/add_log_to_history">add_log_to_history</a></th><td>Add log to transactions history. Deletes the oldest log when the history has more than 20 entries.
Main format: Category: Reason in Reason. Example: Vending: Machinery Using
Arguments:</td></tr><tr><th><a href="datum/bank_account.html#proc/adjust_money">adjust_money</a></th><td>Adjusts the balance of a bank_account as well as sanitizes the numerical input.
Arguments:</td></tr><tr><th><a href="datum/bank_account.html#proc/bank_card_talk">bank_card_talk</a></th><td>This sends a local chat message to the owner of a bank account, on all ID cards registered to the bank_account.
If not held, sends out a message to all nearby players.
Arguments:</td></tr><tr><th><a href="datum/bank_account.html#proc/bounty_num">bounty_num</a></th><td>Returns the required item count, or required chemical units required to submit a bounty.</td></tr><tr><th><a href="datum/bank_account.html#proc/bounty_text">bounty_text</a></th><td>Returns a string with the civilian bounty's description on it.</td></tr><tr><th><a href="datum/bank_account.html#proc/bounty_value">bounty_value</a></th><td>Produces the value of the account's civilian bounty reward, if able.</td></tr><tr><th><a href="datum/bank_account.html#proc/dumpeet">dumpeet</a></th><td>Sets the bank_account to behave as though a CRAB-17 event is happening.</td></tr><tr><th><a href="datum/bank_account.html#proc/has_money">has_money</a></th><td>Returns TRUE if a bank account has more than or equal to the amount, amt.
Otherwise returns false.
Arguments:</td></tr><tr><th><a href="datum/bank_account.html#proc/make_ration_ticket">make_ration_ticket</a></th><td>Attempts to create a ration ticket book in the card holder's hand, and failing that, the drop location of the card</td></tr><tr><th><a href="datum/bank_account.html#proc/pay_debt">pay_debt</a></th><td>Called when a portion of a debt is to be paid. It'll return the amount of credits put forwards to extinguish the debt.</td></tr><tr><th><a href="datum/bank_account.html#proc/reset_bounty">reset_bounty</a></th><td>Performs house-cleaning on variables when a civilian bounty is replaced, or, when a bounty is claimed.</td></tr><tr><th><a href="datum/bank_account.html#proc/setup_unique_account_id">setup_unique_account_id</a></th><td>Proc guarantees the account_id possesses a unique number.
If it doesn't, it tries to find a unique alternative.
It then adds it to the <code>SSeconomy.bank_accounts_by_id</code> global list.</td></tr><tr><th><a href="datum/bank_account.html#proc/transfer_money">transfer_money</a></th><td>Performs a transfer of credits to the bank_account datum from another bank account.
Arguments:</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/account_balance"><aside class="declaration">var </aside>account_balance <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 7"></a></h3><p>How many credits are currently held in the bank account.</p><h3 id="var/account_debt"><aside class="declaration">var </aside>account_debt <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L13"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 13"></a></h3><p>Debt. If higher than 0, A portion of the credits is earned (or the whole debt, whichever is lower) will go toward paying it off.</p><h3 id="var/account_holder"><aside class="declaration">var </aside>account_holder <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L5"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 5"></a></h3><p>Name listed on the account, reflected on the ID card.</p><h3 id="var/account_id"><aside class="declaration">var </aside>account_id <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L23"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 23"></a></h3><p>The Unique ID number code associated with the owner's bank account, assigned at round start.</p><h3 id="var/account_job"><aside class="declaration">var </aside>account_job <aside>– /<a href="datum.html">datum</a>/<a href="datum/job.html">job</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L17"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 17"></a></h3><p>The job datum of the account owner.</p><h3 id="var/add_to_accounts"><aside class="declaration">var </aside>add_to_accounts <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L21"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 21"></a></h3><p>Should this ID be added to the global list of accounts? If true, will be subject to station-bound economy effects as well as income.</p><h3 id="var/bank_cards"><aside class="declaration">var </aside>bank_cards <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L19"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 19"></a></h3><p>List of the physical ID card objects that are associated with this bank_account</p><h3 id="var/being_dumped"><aside class="declaration">var </aside>being_dumped <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 25"></a></h3><p>Is there a CRAB 17 on the station draining funds? Prevents manual fund transfer. pink levels are rising</p><h3 id="var/bitrunning_points"><aside class="declaration">var </aside>bitrunning_points <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L11"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 11"></a></h3><p>Points for bit runner's vendor. Awarded for completing virtual domains.</p><h3 id="var/bounties"><aside class="declaration">var </aside>bounties <aside>– /list/datum/bounty</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L29"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 29"></a></h3><p>If player is currently picking a civilian bounty to do, these options are held here to prevent soft-resetting through the UI.</p><h3 id="var/bounty_timer"><aside class="declaration">var </aside>bounty_timer <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L33"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 33"></a></h3><p>Cooldown timer on replacing a civilain bounty. Bounties can only be replaced once every 5 minutes.</p><h3 id="var/civilian_bounty"><aside class="declaration">var </aside>civilian_bounty <aside>– /<a href="datum.html">datum</a>/<a href="datum/bounty.html">bounty</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L27"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 27"></a></h3><p>Reference to the current civilian bounty that the account is working on.</p><h3 id="var/last_ticket_luxury"><aside class="declaration">var </aside>last_ticket_luxury <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/paycheck_rations/code/quirk.dm#L38"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/paycheck_rations/code/quirk.dm 38"></a></h3><p>Tracks if the last ticket we got was for luxury items, if this is true we get a normal food ticket</p><h3 id="var/mining_points"><aside class="declaration">var </aside>mining_points <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L9"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 9"></a></h3><p>How many mining points (shaft miner credits) is held in the bank account, used for mining vendors.</p><h3 id="var/pay_token"><aside class="declaration">var </aside>pay_token <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L35"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 35"></a></h3><p>A special semi-tandom token for tranfering money from NT pay app</p><h3 id="var/payday_modifier"><aside class="declaration">var </aside>payday_modifier <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L15"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 15"></a></h3><p>If there are things effecting how much income a player will get, it's reflected here 1 is standard for humans.</p><h3 id="var/redeemed_coupons"><aside class="declaration">var </aside>redeemed_coupons <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L41"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 41"></a></h3><p>A lazylist of coupons redeemed with the Coupon Master pda app associated with this account.</p><h3 id="var/replaceable"><aside class="declaration">var </aside>replaceable <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 31"></a></h3><p>Can this account be replaced? Set to true for default IDs not recognized by the station.</p><h3 id="var/tracked_ticket_book"><aside class="declaration">var </aside>tracked_ticket_book <aside>– /<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/paycheck_rations/code/quirk.dm#L36"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/paycheck_rations/code/quirk.dm 36"></a></h3><p>Tracks a linked ration ticket book. If we have one of these, then we'll put tickets in it every payday.</p><h3 id="var/transaction_history"><aside class="declaration">var </aside>transaction_history <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L37"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 37"></a></h3><p>List with a transaction history for NT pay app</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_log_to_history"><aside class="declaration">proc </aside>add_log_to_history<aside>(adjusted_money, reason)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L315"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 315"></a></aside></h3><p>Add log to transactions history. Deletes the oldest log when the history has more than 20 entries.
Main format: Category: Reason in Reason. Example: Vending: Machinery Using
Arguments:</p>
<ul>
<li>adjusted_money - How much was added, negative values removing cash.</li>
<li>reason - The reason of interact with balance, for example, &quot;Bought chips&quot; or &quot;Payday&quot;.</li>
</ul><h3 id="proc/adjust_money"><aside class="declaration">proc </aside>adjust_money<aside>(amount, reason)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L115"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 115"></a></aside></h3><p>Adjusts the balance of a bank_account as well as sanitizes the numerical input.
Arguments:</p>
<ul>
<li>amount - the quantity of credits that will be written off if the value is negative, or added if it is positive.</li>
<li>reason - the reason for the appearance or loss of money</li>
</ul><h3 id="proc/bank_card_talk"><aside class="declaration">proc </aside>bank_card_talk<aside>(message, force)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L206"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 206"></a></aside></h3><p>This sends a local chat message to the owner of a bank account, on all ID cards registered to the bank_account.
If not held, sends out a message to all nearby players.
Arguments:</p>
<ul>
<li>message - text that will be sent to listeners after the id card icon</li>
<li>force - if TRUE ignore checks on client and client prefernces.</li>
</ul><h3 id="proc/bounty_num"><aside class="declaration">proc </aside>bounty_num<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L253"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 253"></a></aside></h3><p>Returns the required item count, or required chemical units required to submit a bounty.</p><h3 id="proc/bounty_text"><aside class="declaration">proc </aside>bounty_text<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L244"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 244"></a></aside></h3><p>Returns a string with the civilian bounty's description on it.</p><h3 id="proc/bounty_value"><aside class="declaration">proc </aside>bounty_value<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L268"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 268"></a></aside></h3><p>Produces the value of the account's civilian bounty reward, if able.</p><h3 id="proc/dumpeet"><aside class="declaration">proc </aside>dumpeet<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L97"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 97"></a></aside></h3><p>Sets the bank_account to behave as though a CRAB-17 event is happening.</p><h3 id="proc/has_money"><aside class="declaration">proc </aside>has_money<aside>(amount)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L106"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 106"></a></aside></h3><p>Returns TRUE if a bank account has more than or equal to the amount, amt.
Otherwise returns false.
Arguments:</p>
<ul>
<li>amount - the quantity of credits that will be reconciled with the account balance.</li>
</ul><h3 id="proc/make_ration_ticket"><aside class="declaration">proc </aside>make_ration_ticket<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/paycheck_rations/code/quirk.dm#L49"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/paycheck_rations/code/quirk.dm 49"></a></aside></h3><p>Attempts to create a ration ticket book in the card holder's hand, and failing that, the drop location of the card</p><h3 id="proc/pay_debt"><aside class="declaration">proc </aside>pay_debt<aside>(amount, is_payment)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L129"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 129"></a></aside></h3><p>Called when a portion of a debt is to be paid. It'll return the amount of credits put forwards to extinguish the debt.</p><h3 id="proc/reset_bounty"><aside class="declaration">proc </aside>reset_bounty<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L276"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 276"></a></aside></h3><p>Performs house-cleaning on variables when a civilian bounty is replaced, or, when a bounty is claimed.</p><h3 id="proc/setup_unique_account_id"><aside class="declaration">proc </aside>setup_unique_account_id<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L61"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 61"></a></aside></h3><p>Proc guarantees the account_id possesses a unique number.
If it doesn't, it tries to find a unique alternative.
It then adds it to the <code>SSeconomy.bank_accounts_by_id</code> global list.</p><h3 id="proc/transfer_money"><aside class="declaration">proc </aside>transfer_money<aside>(/<a href="datum.html">datum</a>/<a href="datum/bank_account.html">bank_account</a>/from, amount, transfer_reason)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/economy/account.dm#L148"><img src="git.png" width="16" height="16" title="code/modules/economy/account.dm 148"></a></aside></h3><p>Performs a transfer of credits to the bank_account datum from another bank account.
Arguments:</p>
<ul>
<li>datum/bank_account/from - The bank account that is sending the credits to this bank_account datum.</li>
<li>amount - the quantity of credits that are being moved between bank_account datums.</li>
<li>transfer_reason - override for adjust_money reason. Use if no default reason(Transfer to/from Name Surname).</li>
</ul></main><footer>tgstation.dme <a href="https://github.com/Skyrat-SS13/Skyrat-tg/tree/e507f9120bb0c3beecfe169d14193d90e7229a58">e507f91</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>