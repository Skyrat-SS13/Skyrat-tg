<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/job - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/job.html#var">Var Details</a> - <a href="datum/controller/subsystem/job.html#proc">Proc Details</a></header><main><h1>job <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/job.html">job</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/all_occupations">all_occupations</a></th><td>List of all jobs.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/assigned_captain">assigned_captain</a></th><td>If TRUE, some player has been assigned Captaincy or Acting Captaincy at some point during the shift and has been given the spare ID safe code.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/chain_of_command">chain_of_command</a></th><td>Keys should be assigned job roles. Values should be &gt;= 1.
Represents the chain of command on the station. Lower numbers mean higher priority.
Used to give the Cap's Spare safe code to a an appropriate player.
Assumed Captain is always the highest in the chain of command.
See [/datum/controller/subsystem/ticker/proc/equip_characters]</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/config_documentation">config_documentation</a></th><td>This is just the message we prepen and put into all of the config files to ensure documentation. We use this in more than one place, so let's put it in the SS to make life a bit easier.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/dynamic_forced_occupations">dynamic_forced_occupations</a></th><td>Lazylist of mob:occupation_string pairs.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/experience_jobs_map">experience_jobs_map</a></th><td>Dictionary of jobs indexed by the experience type they grant.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/job_config_datum_singletons">job_config_datum_singletons</a></th><td>List of job config datum singletons.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/job_priorities_to_strings">job_priorities_to_strings</a></th><td>Dictionary that maps job priorities to low/medium/high. Keys have to be number-strings as assoc lists cannot be indexed by integers. Set in setup_job_lists.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/joinable_departments">joinable_departments</a></th><td>List of all departments with joinable jobs.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/joinable_departments_by_type">joinable_departments_by_type</a></th><td>List of all joinable departments indexed by their typepath, sorted by their own display order.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/joinable_occupations">joinable_occupations</a></th><td>List of jobs that can be joined through the starting menu.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/legacy_mode">legacy_mode</a></th><td>Are we using the old job config system (txt) or the new job config system (TOML)? IF we are going to use the txt file, then we are in &quot;legacy mode&quot;, and this will flip to TRUE.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/name_occupations">name_occupations</a></th><td>Dictionary of all jobs, keys are titles.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/safe_code_request_loc">safe_code_request_loc</a></th><td>The loc to which the emergency safe code has been requested for delivery.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/safe_code_requested">safe_code_requested</a></th><td>Whether the emergency safe code has been requested via a comms console on shifts with no Captain or Acting Captain.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/safe_code_timer_id">safe_code_timer_id</a></th><td>Timer ID for the emergency safe code request.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#var/type_occupations">type_occupations</a></th><td>Dictionary of all jobs, keys are types.</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/AssignRole">AssignRole</a></th><td>Assigns the given job role to the player.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/CheckHeadPositions">CheckHeadPositions</a></th><td>Attempts to fill out all possible head positions for players with that job at a a given job priority level.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/DivideOccupations">DivideOccupations</a></th><td></td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/DropLandAtRandomHallwayPoint">DropLandAtRandomHallwayPoint</a></th><td>Lands specified mob at a random spot in the hallways</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/FillHeadPosition">FillHeadPosition</a></th><td>Will try to select a head, ignoring ALL non-head preferences for every level until.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/OccupyRole">OccupyRole</a></th><td>Used for clocking back in, re-claiming the previously freed role. Returns false if no slot is available.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/assign_priority_positions">assign_priority_positions</a></th><td>Blindly assigns the required roles to every player in the dynamic_forced_occupations list.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/check_job_eligibility">check_job_eligibility</a></th><td>Runs a standard suite of eligibility checks to make sure the player can take the reqeusted job.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/export_toml">export_toml</a></th><td>Proc that we call to generate a new jobconfig.toml file and send it to the requesting client. Returns TRUE if a file is successfully generated.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/fill_ai_positions">fill_ai_positions</a></th><td>Attempts to fill out all available AI positions.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/generate_blank_job_config">generate_blank_job_config</a></th><td>This will just return a list for a completely new job that doesn't need to be migrated from an old config (completely new). Just done here to reduce copypasta</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/generate_config">generate_config</a></th><td>Will generate a new jobconfig.toml file if one does not exist, or if one does exist, will migrate the old jobs.txt file into the new TOML format for download
Returns TRUE if a file is successfully generated, FALSE otherwise.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/generate_config_singletons">generate_config_singletons</a></th><td>Returns an associated list of all of the job config types that we have in the codebase.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/generate_job_config_excluding_legacy">generate_job_config_excluding_legacy</a></th><td>Like <code>generate_blank_job_config</code>, but we opt-out of adding the legacy variables in case we handle it elsewhere.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/get_all_heads">get_all_heads</a></th><td>Returns a list of minds of all heads of staff</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/get_all_sec">get_all_sec</a></th><td>Returns a list of minds of all security members</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/get_job_staff_records">get_job_staff_records</a></th><td>Returns a list of minds of staff in a particular job</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/get_living_heads">get_living_heads</a></th><td>Returns a list of minds of all heads of staff who are alive</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/get_living_sec">get_living_sec</a></th><td>Returns a list of minds of all security members who are alive</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/get_valid_overflow_jobs">get_valid_overflow_jobs</a></th><td>Returns a list of jobs that we are allowed to fuck with during random events</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/has_minimum_jobs">has_minimum_jobs</a></th><td>Check if the station manifest has at least a certain amount of this staff type.
If a matching head of staff is on the manifest, automatically passes (returns TRUE)</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/import_config_from_txt">import_config_from_txt</a></th><td>Loads the job config from the TXT and creates a new TOML file from it.
Returns TRUE if a file is successfully generated, FALSE otherwise.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/is_skeleton_engineering">is_skeleton_engineering</a></th><td>Check if the station manifest has at least a certain amount of this staff type</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/job_priority_level_to_string">job_priority_level_to_string</a></th><td>Takes a job priority #define such as JP_LOW and gets its string representation for logging.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/legacy_load">legacy_load</a></th><td>Operates the legacy jobs.txt parser to load jobs from the old config system.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/load_jobs_from_config">load_jobs_from_config</a></th><td>Sets all of the job datum configurable values to what they've been set to in the config file, jobconfig.toml.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/regenerate_job_config">regenerate_job_config</a></th><td>If we add a new job or more fields to config a job with, quickly spin up a brand new config that inherits all of your old settings, but adds the new job with codebase defaults.
Returns TRUE if a file is successfully generated, FALSE otherwise.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/send_spare_id_safe_code">send_spare_id_safe_code</a></th><td>Send a drop pod containing a piece of paper with the spare ID safe code to loc</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/setup_alt_job_items">setup_alt_job_items</a></th><td>Shows a list of all current and future polls and buttons to edit or delete them or create a new poll.</td></tr><tr><th><a href="datum/controller/subsystem/job.html#proc/setup_job_lists">setup_job_lists</a></th><td>Builds various lists of jobs based on station, centcom and additional jobs with icons associated with them.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/all_occupations"><aside class="declaration">var </aside>all_occupations <aside>– /list/datum/job</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L7"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 7"></a></h3><p>List of all jobs.</p><h3 id="var/assigned_captain"><aside class="declaration">var </aside>assigned_captain <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L57"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 57"></a></h3><p>If TRUE, some player has been assigned Captaincy or Acting Captaincy at some point during the shift and has been given the spare ID safe code.</p><h3 id="var/chain_of_command"><aside class="declaration">var </aside>chain_of_command <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L46"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 46"></a></h3><p>Keys should be assigned job roles. Values should be &gt;= 1.
Represents the chain of command on the station. Lower numbers mean higher priority.
Used to give the Cap's Spare safe code to a an appropriate player.
Assumed Captain is always the highest in the chain of command.
See [/datum/controller/subsystem/ticker/proc/equip_characters]</p><h3 id="var/config_documentation"><aside class="declaration">var </aside>config_documentation <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L75"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 75"></a></h3><p>This is just the message we prepen and put into all of the config files to ensure documentation. We use this in more than one place, so let's put it in the SS to make life a bit easier.</p><h3 id="var/dynamic_forced_occupations"><aside class="declaration">var </aside>dynamic_forced_occupations <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L37"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 37"></a></h3><p>Lazylist of mob:occupation_string pairs.</p><h3 id="var/experience_jobs_map"><aside class="declaration">var </aside>experience_jobs_map <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L16"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 16"></a></h3><p>Dictionary of jobs indexed by the experience type they grant.</p><h3 id="var/job_config_datum_singletons"><aside class="declaration">var </aside>job_config_datum_singletons <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L72"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 72"></a></h3><p>List of job config datum singletons.</p><h3 id="var/job_priorities_to_strings"><aside class="declaration">var </aside>job_priorities_to_strings <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L66"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 66"></a></h3><p>Dictionary that maps job priorities to low/medium/high. Keys have to be number-strings as assoc lists cannot be indexed by integers. Set in setup_job_lists.</p><h3 id="var/joinable_departments"><aside class="declaration">var </aside>joinable_departments <aside>– /list/datum/job_department</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L19"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 19"></a></h3><p>List of all departments with joinable jobs.</p><h3 id="var/joinable_departments_by_type"><aside class="declaration">var </aside>joinable_departments_by_type <aside>– /list/datum/job_department</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L21"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 21"></a></h3><p>List of all joinable departments indexed by their typepath, sorted by their own display order.</p><h3 id="var/joinable_occupations"><aside class="declaration">var </aside>joinable_occupations <aside>– /list/datum/job</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L9"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 9"></a></h3><p>List of jobs that can be joined through the starting menu.</p><h3 id="var/legacy_mode"><aside class="declaration">var </aside>legacy_mode <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L69"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 69"></a></h3><p>Are we using the old job config system (txt) or the new job config system (TOML)? IF we are going to use the txt file, then we are in &quot;legacy mode&quot;, and this will flip to TRUE.</p><h3 id="var/name_occupations"><aside class="declaration">var </aside>name_occupations <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L11"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 11"></a></h3><p>Dictionary of all jobs, keys are titles.</p><h3 id="var/safe_code_request_loc"><aside class="declaration">var </aside>safe_code_request_loc <aside>– /<a href="turf.html">turf</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L63"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 63"></a></h3><p>The loc to which the emergency safe code has been requested for delivery.</p><h3 id="var/safe_code_requested"><aside class="declaration">var </aside>safe_code_requested <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L59"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 59"></a></h3><p>Whether the emergency safe code has been requested via a comms console on shifts with no Captain or Acting Captain.</p><h3 id="var/safe_code_timer_id"><aside class="declaration">var </aside>safe_code_timer_id <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L61"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 61"></a></h3><p>Timer ID for the emergency safe code request.</p><h3 id="var/type_occupations"><aside class="declaration">var </aside>type_occupations <aside>– /list/datum/job</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L13"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 13"></a></h3><p>Dictionary of all jobs, keys are types.</p><h2 id="proc">Proc Details</h2><h3 id="proc/AssignRole"><aside class="declaration">proc </aside>AssignRole<aside>(/<a href="mob.html">mob</a>/<a href="mob/dead.html">dead</a>/<a href="mob/dead/new_player.html">new_player</a>/player, /<a href="datum.html">datum</a>/<a href="datum/job.html">job</a>/job, latejoin, do_eligibility_checks)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L233"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 233"></a></aside></h3><p>Assigns the given job role to the player.</p>
<p>Arguments:</p>
<ul>
<li>player - The player to assign the job to</li>
<li>job - The job to assign</li>
<li>latejoin - Set to TRUE if this is a latejoin role assignment.</li>
<li>do_eligibility_checks - Set to TRUE to conduct all job eligibility tests and reject on failure. Set to FALSE if job eligibility has been tested elsewhere and they can be safely skipped.</li>
</ul><h3 id="proc/CheckHeadPositions"><aside class="declaration">proc </aside>CheckHeadPositions<aside>(level)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L359"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 359"></a></aside></h3><p>Attempts to fill out all possible head positions for players with that job at a a given job priority level.</p>
<p>Arguments:</p>
<ul>
<li>level - One of the JP_LOW, JP_MEDIUM or JP_HIGH defines. Attempts to find candidates with head jobs at this priority only.</li>
</ul><h3 id="proc/DivideOccupations"><aside class="declaration">proc </aside>DivideOccupations<aside>(pure, allow_all)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L394"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 394"></a></aside></h3><ul>
<li>Proc DivideOccupations</li>
<li>fills var &quot;assigned_role&quot; for all ready players.</li>
<li>This proc must not have any side effect besides of modifying &quot;assigned_role&quot;.</li>
</ul><h3 id="proc/DropLandAtRandomHallwayPoint"><aside class="declaration">proc </aside>DropLandAtRandomHallwayPoint<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/living_mob)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L752"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 752"></a></aside></h3><p>Lands specified mob at a random spot in the hallways</p><h3 id="proc/FillHeadPosition"><aside class="declaration">proc </aside>FillHeadPosition<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L335"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 335"></a></aside></h3><p>Will try to select a head, ignoring ALL non-head preferences for every level until.</p>
<p>Basically tries to ensure there is at least one head in every shift if anyone has that job preference enabled at all.</p><h3 id="proc/OccupyRole"><aside class="declaration">proc </aside>OccupyRole<aside>(rank)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/cryosleep/code/job.dm#L11"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/cryosleep/code/job.dm 11"></a></aside></h3><p>Used for clocking back in, re-claiming the previously freed role. Returns false if no slot is available.</p><h3 id="proc/assign_priority_positions"><aside class="declaration">proc </aside>assign_priority_positions<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L864"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 864"></a></aside></h3><p>Blindly assigns the required roles to every player in the dynamic_forced_occupations list.</p><h3 id="proc/check_job_eligibility"><aside class="declaration">proc </aside>check_job_eligibility<aside>(/<a href="mob.html">mob</a>/<a href="mob/dead.html">dead</a>/<a href="mob/dead/new_player.html">new_player</a>/player, /<a href="datum.html">datum</a>/<a href="datum/job.html">job</a>/possible_job, debug_prefix, add_job_to_log)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L889"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 889"></a></aside></h3><p>Runs a standard suite of eligibility checks to make sure the player can take the reqeusted job.</p>
<p>Checks:</p>
<ul>
<li>Role bans</li>
<li>How many days old the player account is</li>
<li>Whether the player has the required hours in other jobs to take that role</li>
<li>If the job is in the mind's restricted roles, for example if they have an antag datum that's incompatible with certain roles.</li>
</ul>
<p>Arguments:</p>
<ul>
<li>player - The player to check for job eligibility.</li>
<li>possible_job - The job to check for eligibility against.</li>
<li>debug_prefix - Logging prefix for the JobDebug log entries. For example, GRJ during GiveRandomJob or DO during DivideOccupations.</li>
<li>add_job_to_log - If TRUE, appends the job type to the log entry. If FALSE, does not. Set to FALSE when check is part of iterating over players for a specific job, set to TRUE when check is part of iterating over jobs for a specific player and you don't want extra log entry spam.</li>
</ul><h3 id="proc/export_toml"><aside class="declaration">proc </aside>export_toml<aside>(/<a href="mob.html">mob</a>/user, data)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/configuration/entries/jobs.dm#L181"><img src="git.png" width="16" height="16" title="code/controllers/configuration/entries/jobs.dm 181"></a></aside></h3><p>Proc that we call to generate a new jobconfig.toml file and send it to the requesting client. Returns TRUE if a file is successfully generated.</p><h3 id="proc/fill_ai_positions"><aside class="declaration">proc </aside>fill_ai_positions<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L374"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 374"></a></aside></h3><p>Attempts to fill out all available AI positions.</p><h3 id="proc/generate_blank_job_config"><aside class="declaration">proc </aside>generate_blank_job_config<aside>(/<a href="datum.html">datum</a>/<a href="datum/job.html">job</a>/new_occupation)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/configuration/entries/jobs.dm#L154"><img src="git.png" width="16" height="16" title="code/controllers/configuration/entries/jobs.dm 154"></a></aside></h3><p>This will just return a list for a completely new job that doesn't need to be migrated from an old config (completely new). Just done here to reduce copypasta</p><h3 id="proc/generate_config"><aside class="declaration">proc </aside>generate_config<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/configuration/entries/jobs.dm#L52"><img src="git.png" width="16" height="16" title="code/controllers/configuration/entries/jobs.dm 52"></a></aside></h3><p>Will generate a new jobconfig.toml file if one does not exist, or if one does exist, will migrate the old jobs.txt file into the new TOML format for download
Returns TRUE if a file is successfully generated, FALSE otherwise.</p><h3 id="proc/generate_config_singletons"><aside class="declaration">proc </aside>generate_config_singletons<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/configuration/entries/jobs.dm#L4"><img src="git.png" width="16" height="16" title="code/controllers/configuration/entries/jobs.dm 4"></a></aside></h3><p>Returns an associated list of all of the job config types that we have in the codebase.</p><h3 id="proc/generate_job_config_excluding_legacy"><aside class="declaration">proc </aside>generate_job_config_excluding_legacy<aside>(/<a href="datum.html">datum</a>/<a href="datum/job.html">job</a>/new_occupation)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/configuration/entries/jobs.dm#L168"><img src="git.png" width="16" height="16" title="code/controllers/configuration/entries/jobs.dm 168"></a></aside></h3><p>Like <code>generate_blank_job_config</code>, but we opt-out of adding the legacy variables in case we handle it elsewhere.</p><h3 id="proc/get_all_heads"><aside class="declaration">proc </aside>get_all_heads<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L775"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 775"></a></aside></h3><p>Returns a list of minds of all heads of staff</p><h3 id="proc/get_all_sec"><aside class="declaration">proc </aside>get_all_sec<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L792"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 792"></a></aside></h3><p>Returns a list of minds of all security members</p><h3 id="proc/get_job_staff_records"><aside class="declaration">proc </aside>get_job_staff_records<aside>(job_trim)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/cargo/code/export_gate.dm#L2"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/cargo/code/export_gate.dm 2"></a></aside></h3><p>Returns a list of minds of staff in a particular job</p><h3 id="proc/get_living_heads"><aside class="declaration">proc </aside>get_living_heads<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L765"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 765"></a></aside></h3><p>Returns a list of minds of all heads of staff who are alive</p><h3 id="proc/get_living_sec"><aside class="declaration">proc </aside>get_living_sec<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L782"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 782"></a></aside></h3><p>Returns a list of minds of all security members who are alive</p><h3 id="proc/get_valid_overflow_jobs"><aside class="declaration">proc </aside>get_valid_overflow_jobs<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L98"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 98"></a></aside></h3><p>Returns a list of jobs that we are allowed to fuck with during random events</p><h3 id="proc/has_minimum_jobs"><aside class="declaration">proc </aside>has_minimum_jobs<aside>(crew_threshold, /list/jobs, /list/head_jobs)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L965"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 965"></a></aside></h3><p>Check if the station manifest has at least a certain amount of this staff type.
If a matching head of staff is on the manifest, automatically passes (returns TRUE)</p>
<p>Arguments:</p>
<ul>
<li>crew_threshold - amount of crew to meet the requirement</li>
<li>jobs - a list of jobs that qualify the requirement</li>
<li>head_jobs - a list of head jobs that qualify the requirement</li>
</ul><h3 id="proc/import_config_from_txt"><aside class="declaration">proc </aside>import_config_from_txt<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/configuration/entries/jobs.dm#L82"><img src="git.png" width="16" height="16" title="code/controllers/configuration/entries/jobs.dm 82"></a></aside></h3><p>Loads the job config from the TXT and creates a new TOML file from it.
Returns TRUE if a file is successfully generated, FALSE otherwise.</p><h3 id="proc/is_skeleton_engineering"><aside class="declaration">proc </aside>is_skeleton_engineering<aside>(crew_threshold)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/delam_emergency_stop/code/delam.dm#L46"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/delam_emergency_stop/code/delam.dm 46"></a></aside></h3><p>Check if the station manifest has at least a certain amount of this staff type</p>
<p>Arguments:</p>
<ul>
<li>crew_threshold - amount of crew before it's no longer considered a skeleton crew</li>
</ul><h3 id="proc/job_priority_level_to_string"><aside class="declaration">proc </aside>job_priority_level_to_string<aside>(priority)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L871"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 871"></a></aside></h3><p>Takes a job priority #define such as JP_LOW and gets its string representation for logging.</p><h3 id="proc/legacy_load"><aside class="declaration">proc </aside>legacy_load<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/configuration/entries/jobs.dm#L38"><img src="git.png" width="16" height="16" title="code/controllers/configuration/entries/jobs.dm 38"></a></aside></h3><p>Operates the legacy jobs.txt parser to load jobs from the old config system.</p><h3 id="proc/load_jobs_from_config"><aside class="declaration">proc </aside>load_jobs_from_config<aside>(silent)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/configuration/entries/jobs.dm#L12"><img src="git.png" width="16" height="16" title="code/controllers/configuration/entries/jobs.dm 12"></a></aside></h3><p>Sets all of the job datum configurable values to what they've been set to in the config file, jobconfig.toml.</p><h3 id="proc/regenerate_job_config"><aside class="declaration">proc </aside>regenerate_job_config<aside>(/<a href="mob.html">mob</a>/user)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/configuration/entries/jobs.dm#L111"><img src="git.png" width="16" height="16" title="code/controllers/configuration/entries/jobs.dm 111"></a></aside></h3><p>If we add a new job or more fields to config a job with, quickly spin up a brand new config that inherits all of your old settings, but adds the new job with codebase defaults.
Returns TRUE if a file is successfully generated, FALSE otherwise.</p><h3 id="proc/send_spare_id_safe_code"><aside class="declaration">proc </aside>send_spare_id_safe_code<aside>(loc)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L858"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 858"></a></aside></h3><p>Send a drop pod containing a piece of paper with the spare ID safe code to loc</p><h3 id="proc/setup_alt_job_items"><aside class="declaration">proc </aside>setup_alt_job_items<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/equipping, /<a href="datum.html">datum</a>/<a href="datum/job.html">job</a>/job, /<a href="client.html">client</a>/player_client)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/alternative_job_titles/code/job.dm#L10"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/alternative_job_titles/code/job.dm 10"></a></aside></h3><p>Shows a list of all current and future polls and buttons to edit or delete them or create a new poll.</p>
<p>All extra functionality to run on new player mobs, in a place where we actually have the client,
and haven't called COMSIG_GLOB_JOB_AFTER_SPAWN yet, so we are running before the wallet trait,
and other things that rely on items already being settled.</p><h3 id="proc/setup_job_lists"><aside class="declaration">proc </aside>setup_job_lists<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/job.dm#L802"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/job.dm 802"></a></aside></h3><p>Builds various lists of jobs based on station, centcom and additional jobs with icons associated with them.</p></main><footer>tgstation.dme <a href="https://github.com/Skyrat-SS13/Skyrat-tg/tree/e507f9120bb0c3beecfe169d14193d90e7229a58">e507f91</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>