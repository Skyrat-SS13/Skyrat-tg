<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/controller/subsystem/trading_card_game - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/controller/subsystem/trading_card_game.html#var">Var Details</a> - <a href="datum/controller/subsystem/trading_card_game.html#proc">Proc Details</a></header><main><h1>trading_card_game <aside>/<a href="datum.html">datum</a>/<a href="datum/controller/subsystem.html">controller/subsystem</a>/<a href="datum/controller/subsystem/trading_card_game.html">trading_card_game</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L1"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 1"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#var/cached_cards">cached_cards</a></th><td>List of all cards by series, with cards cached by rarity to make those lookups faster</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#var/card_directory">card_directory</a></th><td>Base directory for all related string files</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#var/card_files">card_files</a></th><td>List of card files to load</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#var/card_packs">card_packs</a></th><td>What cardpack types to load</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#var/keyword_files">keyword_files</a></th><td>List of keyword files
These allow you to add on hovor logic to parts of a card's text, displaying extra info</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#var/keywords">keywords</a></th><td>List of loaded keywords matched with their hovor text</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/check_card_datums">check_card_datums</a></th><td>Checks the global card list for cards that don't override all the default values of the card datum</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/check_card_distribution">check_card_distribution</a></th><td>Used to test open a large amount of cardpacks</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/check_cardpacks">check_cardpacks</a></th><td>Checks the passed type list for missing raritys, or raritys out of bounds</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/clearCards">clearCards</a></th><td>Empty the rarity cache so we can safely add new cards</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/get_guarenteed_rarity_table">get_guarenteed_rarity_table</a></th><td>See above</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/get_rarity_table">get_rarity_table</a></th><td>Because old me wanted to keep memory costs down, each cardpack type shares a rarity list
We do the spooky stuff in here to ensure we don't have too many lists lying around</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/loadAllCardFiles">loadAllCardFiles</a></th><td>Loads all the card files</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/loadCardFile">loadCardFile</a></th><td>Loads the contents of a json file into our global card list</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/loadKeywordFile">loadKeywordFile</a></th><td>Loads the contents of a json file into our global card list</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/printAllCards">printAllCards</a></th><td>Prints all the cards names</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/reloadAllCardFiles">reloadAllCardFiles</a></th><td>Reloads all card files</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/resolve_keywords">resolve_keywords</a></th><td>Takes a string as input. Searches it for keywords in the pattern {$keyword}, and replaces them with their expanded form, generated above</td></tr><tr><th><a href="datum/controller/subsystem/trading_card_game.html#proc/styleKeywords">styleKeywords</a></th><td>Styles our keywords, converting them from just the raw text to the output we want</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/cached_cards"><aside class="declaration">var </aside>cached_cards <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L17"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 17"></a></h3><p>List of all cards by series, with cards cached by rarity to make those lookups faster</p><h3 id="var/card_directory"><aside class="declaration">var </aside>card_directory <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L6"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 6"></a></h3><p>Base directory for all related string files</p><h3 id="var/card_files"><aside class="declaration">var </aside>card_files <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L8"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 8"></a></h3><p>List of card files to load</p><h3 id="var/card_packs"><aside class="declaration">var </aside>card_packs <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L13"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 13"></a></h3><p>What cardpack types to load</p><h3 id="var/keyword_files"><aside class="declaration">var </aside>keyword_files <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L11"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 11"></a></h3><p>List of keyword files
These allow you to add on hovor logic to parts of a card's text, displaying extra info</p><h3 id="var/keywords"><aside class="declaration">var </aside>keywords <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L19"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 19"></a></h3><p>List of loaded keywords matched with their hovor text</p><h2 id="proc">Proc Details</h2><h3 id="proc/check_card_datums"><aside class="declaration">proc </aside>check_card_datums<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L152"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 152"></a></aside></h3><p>Checks the global card list for cards that don't override all the default values of the card datum</p><h3 id="proc/check_card_distribution"><aside class="declaration">proc </aside>check_card_distribution<aside>(cardPack, batchSize, batchCount, guaranteed)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L174"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 174"></a></aside></h3><p>Used to test open a large amount of cardpacks</p><h3 id="proc/check_cardpacks"><aside class="declaration">proc </aside>check_cardpacks<aside>(card_pack_list)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L127"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 127"></a></aside></h3><p>Checks the passed type list for missing raritys, or raritys out of bounds</p><h3 id="proc/clearCards"><aside class="declaration">proc </aside>clearCards<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L36"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 36"></a></aside></h3><p>Empty the rarity cache so we can safely add new cards</p><h3 id="proc/get_guarenteed_rarity_table"><aside class="declaration">proc </aside>get_guarenteed_rarity_table<aside>(type, /list/sample_table)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L113"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 113"></a></aside></h3><p>See above</p><h3 id="proc/get_rarity_table"><aside class="declaration">proc </aside>get_rarity_table<aside>(type, /list/sample_table)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L104"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 104"></a></aside></h3><p>Because old me wanted to keep memory costs down, each cardpack type shares a rarity list
We do the spooky stuff in here to ensure we don't have too many lists lying around</p><h3 id="proc/loadAllCardFiles"><aside class="declaration">proc </aside>loadAllCardFiles<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L28"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 28"></a></aside></h3><p>Loads all the card files</p><h3 id="proc/loadCardFile"><aside class="declaration">proc </aside>loadCardFile<aside>(filename, directory)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L84"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 84"></a></aside></h3><p>Loads the contents of a json file into our global card list</p><h3 id="proc/loadKeywordFile"><aside class="declaration">proc </aside>loadKeywordFile<aside>(filename, directory)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L48"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 48"></a></aside></h3><p>Loads the contents of a json file into our global card list</p><h3 id="proc/printAllCards"><aside class="declaration">proc </aside>printAllCards<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L119"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 119"></a></aside></h3><p>Prints all the cards names</p><h3 id="proc/reloadAllCardFiles"><aside class="declaration">proc </aside>reloadAllCardFiles<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L42"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 42"></a></aside></h3><p>Reloads all card files</p><h3 id="proc/resolve_keywords"><aside class="declaration">proc </aside>resolve_keywords<aside>(search_through)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L64"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 64"></a></aside></h3><p>Takes a string as input. Searches it for keywords in the pattern {$keyword}, and replaces them with their expanded form, generated above</p><h3 id="proc/styleKeywords"><aside class="declaration">proc </aside>styleKeywords<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/controllers/subsystem/tcgsetup.dm#L57"><img src="git.png" width="16" height="16" title="code/controllers/subsystem/tcgsetup.dm 57"></a></aside></h3><p>Styles our keywords, converting them from just the raw text to the output we want</p></main><footer>tgstation.dme <a href="https://github.com/Skyrat-SS13/Skyrat-tg/tree/e507f9120bb0c3beecfe169d14193d90e7229a58">e507f91</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>