<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/admins - /tg/ Station 13</title></head><body><header><a href="index.html">/tg/ Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/admins.html#var">Var Details</a> - <a href="datum/admins.html#proc">Proc Details</a></header><main><h1>admins <aside>/<a href="datum.html">datum</a>/<a href="datum/admins.html">admins</a></aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L12"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 12"></a></h1><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/admins.html#var/admin_signature">admin_signature</a></th><td>Randomly generated signature used for security records authorization name.</td></tr><tr><th><a href="datum/admins.html#var/blocked_by_2fa">blocked_by_2fa</a></th><td>Whether or not the user tried to connect, but was blocked by 2FA</td></tr><tr><th><a href="datum/admins.html#var/bypass_2fa">bypass_2fa</a></th><td>Whether or not this user can bypass 2FA</td></tr><tr><th><a href="datum/admins.html#var/cached_feedback_link">cached_feedback_link</a></th><td>Link from the database pointing to the admin's feedback forum</td></tr><tr><th><a href="datum/admins.html#var/tagged_datums">tagged_datums</a></th><td>A lazylist of tagged datums, for quick reference with the View Tags verb</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/admins.html#proc/Game">Game</a></th><td>Panels</td></tr><tr><th><a href="datum/admins.html#proc/add_tagged_datum">add_tagged_datum</a></th><td>Inserts the target_datum into <a href="datum/admins.html#var/tagged_datums" title="/datum/admins">/datum/admins/var/tagged_datums</a>, for later reference.</td></tr><tr><th><a href="datum/admins.html#proc/can_edit_rights_flags">can_edit_rights_flags</a></th><td>Get the permissions this admin is allowed to edit on other ranks</td></tr><tr><th><a href="datum/admins.html#proc/can_place_additional_admin_ban">can_place_additional_admin_ban</a></th><td>Checks if the admin can place an additional admin ban.</td></tr><tr><th><a href="datum/admins.html#proc/check_2fa">check_2fa</a></th><td>Returns whether or not the given client has a verified 2FA connection.
The output is in the form of a list with the first index being whether or not the
check was successful, the 2nd is the ID of the associated database entry
if its a false result and if one can be found.</td></tr><tr><th><a href="datum/admins.html#proc/feedback_link">feedback_link</a></th><td>Returns the feedback forum thread for the admin holder's owner, as according to DB.</td></tr><tr><th><a href="datum/admins.html#proc/forceEvent">forceEvent</a></th><td>Opens up the Force Event Panel</td></tr><tr><th><a href="datum/admins.html#proc/handle_tagged_del">handle_tagged_del</a></th><td>Get ahead of the curve with deleting</td></tr><tr><th><a href="datum/admins.html#proc/intensity_credits_panel">intensity_credits_panel</a></th><td>Opens up the ICES panel</td></tr><tr><th><a href="datum/admins.html#proc/manage_player_rank_in_group">manage_player_rank_in_group</a></th><td>Handles managing player ranks based on the name of the group that was chosen.</td></tr><tr><th><a href="datum/admins.html#proc/manage_player_ranks">manage_player_ranks</a></th><td>Proc for admins to change people's &quot;player&quot; ranks (donator, mentor, veteran, etc.)</td></tr><tr><th><a href="datum/admins.html#proc/message_pda">message_pda</a></th><td>Opens up the PDA Message Panel</td></tr><tr><th><a href="datum/admins.html#proc/modify_traits">modify_traits</a></th><td>Allow admin to add or remove traits of datum</td></tr><tr><th><a href="datum/admins.html#proc/notify_all_banned_players">notify_all_banned_players</a></th><td>Notifies all banned players about their ban and gives them a link to appeal from the config. If it was a server ban, it also kicks them.</td></tr><tr><th><a href="datum/admins.html#proc/one_click_antag">one_click_antag</a></th><td>If anyone can figure out how to get Obsessed to work I would be very appreciative.</td></tr><tr><th><a href="datum/admins.html#proc/poll_list_panel">poll_list_panel</a></th><td>Shows a list of all current and future polls and buttons to edit or delete them or create a new poll.</td></tr><tr><th><a href="datum/admins.html#proc/poll_management_panel">poll_management_panel</a></th><td>Show the options for creating a poll or editing its parameters along with its linked options.</td></tr><tr><th><a href="datum/admins.html#proc/poll_option_panel">poll_option_panel</a></th><td>Show the options for creating a poll option or editing its parameters.</td></tr><tr><th><a href="datum/admins.html#proc/poll_option_parse_href">poll_option_parse_href</a></th><td>Processes topic data from poll option panel.</td></tr><tr><th><a href="datum/admins.html#proc/poll_parse_href">poll_parse_href</a></th><td>Processes topic data from poll management panel.</td></tr><tr><th><a href="datum/admins.html#proc/rank_flags">rank_flags</a></th><td>Get the rank flags of the admin</td></tr><tr><th><a href="datum/admins.html#proc/rank_names">rank_names</a></th><td>Get the rank name of the admin</td></tr><tr><th><a href="datum/admins.html#proc/reban">reban</a></th><td>Sometimes an admin did not intend to unban a player. This proc undoes an unbanning operation by setting the unbanned_ keys in the DB back to null.</td></tr><tr><th><a href="datum/admins.html#proc/remove_tagged_datum">remove_tagged_datum</a></th><td>Attempts to remove the specified datum from <a href="datum/admins.html#var/tagged_datums" title="/datum/admins">/datum/admins/var/tagged_datums</a> if it exists</td></tr><tr><th><a href="datum/admins.html#proc/verify_admin_from_local_cache">verify_admin_from_local_cache</a></th><td>Returns true if the admin's cid/ip is verified in the local cache</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/admin_signature"><aside class="declaration">var </aside>admin_signature <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L25"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 25"></a></h3><p>Randomly generated signature used for security records authorization name.</p><h3 id="var/blocked_by_2fa"><aside class="declaration">var </aside>blocked_by_2fa <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L41"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 41"></a></h3><p>Whether or not the user tried to connect, but was blocked by 2FA</p><h3 id="var/bypass_2fa"><aside class="declaration">var </aside>bypass_2fa <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L44"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 44"></a></h3><p>Whether or not this user can bypass 2FA</p><h3 id="var/cached_feedback_link"><aside class="declaration">var </aside>cached_feedback_link <aside>– </aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L30"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 30"></a></h3><p>Link from the database pointing to the admin's feedback forum</p><h3 id="var/tagged_datums"><aside class="declaration">var </aside>tagged_datums <aside>– /list</aside> <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L47"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 47"></a></h3><p>A lazylist of tagged datums, for quick reference with the View Tags verb</p><h2 id="proc">Proc Details</h2><h3 id="proc/Game"><aside class="declaration">proc </aside>Game<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/admin.dm#L18"><img src="git.png" width="16" height="16" title="code/modules/admin/admin.dm 18"></a></aside></h3><p>Panels</p><h3 id="proc/add_tagged_datum"><aside class="declaration">proc </aside>add_tagged_datum<aside>(/<a href="datum.html">datum</a>/target_datum)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/tag.dm#L7"><img src="git.png" width="16" height="16" title="code/modules/admin/tag.dm 7"></a></aside></h3><p>Inserts the target_datum into <a href="datum/admins.html#var/tagged_datums" title="/datum/admins">/datum/admins/var/tagged_datums</a>, for later reference.</p>
<p>Arguments:</p>
<ul>
<li>target_datum - The datum you want to create a tag for</li>
</ul><h3 id="proc/can_edit_rights_flags"><aside class="declaration">proc </aside>can_edit_rights_flags<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L421"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 421"></a></aside></h3><p>Get the permissions this admin is allowed to edit on other ranks</p><h3 id="proc/can_place_additional_admin_ban"><aside class="declaration">proc </aside>can_place_additional_admin_ban<aside>(admin_ckey)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/sql_ban_system.dm#L1101"><img src="git.png" width="16" height="16" title="code/modules/admin/sql_ban_system.dm 1101"></a></aside></h3><p>Checks if the admin can place an additional admin ban.</p>
<p>Returns FALSE if the query fails to execute.
Returns FALSE and notifies the admin in chat if they are at their max number of admin bans already.
Returns TRUE if an admin can place an additional admin ban.</p>
<p>Arguments:</p>
<ul>
<li>admin_ckey - The ckey of the admin who is trying to place an admin ban.</li>
</ul><h3 id="proc/check_2fa"><aside class="declaration">proc </aside>check_2fa<aside>(/<a href="client.html">client</a>/client)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L220"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 220"></a></aside></h3><p>Returns whether or not the given client has a verified 2FA connection.
The output is in the form of a list with the first index being whether or not the
check was successful, the 2nd is the ID of the associated database entry
if its a false result and if one can be found.</p><h3 id="proc/feedback_link"><aside class="declaration">proc </aside>feedback_link<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L165"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 165"></a></aside></h3><p>Returns the feedback forum thread for the admin holder's owner, as according to DB.</p><h3 id="proc/forceEvent"><aside class="declaration">proc </aside>forceEvent<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/force_event.dm#L6"><img src="git.png" width="16" height="16" title="code/modules/admin/force_event.dm 6"></a></aside></h3><p>Opens up the Force Event Panel</p><h3 id="proc/handle_tagged_del"><aside class="declaration">proc </aside>handle_tagged_del<aside>(/<a href="datum.html">datum</a>/source)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/tag.dm#L17"><img src="git.png" width="16" height="16" title="code/modules/admin/tag.dm 17"></a></aside></h3><p>Get ahead of the curve with deleting</p><h3 id="proc/intensity_credits_panel"><aside class="declaration">proc </aside>intensity_credits_panel<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/ices_events/code/ICES_tgui.dm#L6"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/ices_events/code/ICES_tgui.dm 6"></a></aside></h3><p>Opens up the ICES panel</p><h3 id="proc/manage_player_rank_in_group"><aside class="declaration">proc </aside>manage_player_rank_in_group<aside>(group)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/admin/code/player_ranks.dm#L30"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/admin/code/player_ranks.dm 30"></a></aside></h3><p>Handles managing player ranks based on the name of the group that was chosen.</p>
<p>Arguments:</p>
<ul>
<li>group - The title of the player rank that was chosen to be managed.</li>
</ul><h3 id="proc/manage_player_ranks"><aside class="declaration">proc </aside>manage_player_ranks<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/admin/code/player_ranks.dm#L11"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/admin/code/player_ranks.dm 11"></a></aside></h3><p>Proc for admins to change people's &quot;player&quot; ranks (donator, mentor, veteran, etc.)</p><h3 id="proc/message_pda"><aside class="declaration">proc </aside>message_pda<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/admin_pda_message.dm#L6"><img src="git.png" width="16" height="16" title="code/modules/admin/admin_pda_message.dm 6"></a></aside></h3><p>Opens up the PDA Message Panel</p><h3 id="proc/modify_traits"><aside class="declaration">proc </aside>modify_traits<aside>(/<a href="datum.html">datum</a>/D)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/verbs/admin.dm#L100"><img src="git.png" width="16" height="16" title="code/modules/admin/verbs/admin.dm 100"></a></aside></h3><p>Allow admin to add or remove traits of datum</p><h3 id="proc/notify_all_banned_players"><aside class="declaration">proc </aside>notify_all_banned_players<aside>(banned_player_ckey, banned_player_ip, banned_player_cid, banned_player_message, banned_other_message, kick_banned_players, applies_to_admins)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/sql_ban_system.dm#L1143"><img src="git.png" width="16" height="16" title="code/modules/admin/sql_ban_system.dm 1143"></a></aside></h3><p>Notifies all banned players about their ban and gives them a link to appeal from the config. If it was a server ban, it also kicks them.</p>
<p>If the banned player's ckey has a linked client on the server, it notifies them of the ban details and kicks them if it was a server ban.
If there is anyone else sharing the banned player's IP or CID, it notifies them of the ban details and kicks them if it was a server ban.</p>
<p>Builds the ban cache for every client impacted by the ban.</p>
<p>Arguments:</p>
<ul>
<li>banned_player_ckey - The ckey of the banned player.</li>
<li>banned_player_ip - IP address of the banned player.</li>
<li>banned_player_cid - CID of the banned player.</li>
<li>banned_player_message - The message to show to only the specifically banned player.</li>
<li>banned_other_message - The message to show to any other players who share the banned player's IP or CID.</li>
<li>kick_banned_players - TRUE if we want to kick affected players, FALSE otherwise. This should generally only be TRUE for server bans.</li>
<li>applies_to_admins - TRUE if this ban applies to admins and we may need to kick them, FALSE otherwise.</li>
</ul><h3 id="proc/one_click_antag"><aside class="declaration">proc </aside>one_click_antag<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/modular_skyrat/modules/oneclickantag/code/oneclickantag.dm#L45"><img src="git.png" width="16" height="16" title="modular_skyrat/modules/oneclickantag/code/oneclickantag.dm 45"></a></aside></h3><p>If anyone can figure out how to get Obsessed to work I would be very appreciative.</p><h3 id="proc/poll_list_panel"><aside class="declaration">proc </aside>poll_list_panel<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/poll_management.dm#L73"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 73"></a></aside></h3><p>Shows a list of all current and future polls and buttons to edit or delete them or create a new poll.</p><h3 id="proc/poll_management_panel"><aside class="declaration">proc </aside>poll_management_panel<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/poll_management.dm#L97"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 97"></a></aside></h3><p>Show the options for creating a poll or editing its parameters along with its linked options.</p><h3 id="proc/poll_option_panel"><aside class="declaration">proc </aside>poll_option_panel<aside>(/<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll, /<a href="datum.html">datum</a>/<a href="datum/poll_option.html">poll_option</a>/option)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/poll_management.dm#L483"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 483"></a></aside></h3><p>Show the options for creating a poll option or editing its parameters.</p><h3 id="proc/poll_option_parse_href"><aside class="declaration">proc </aside>poll_option_parse_href<aside>(/list/href_list, /<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll, /<a href="datum.html">datum</a>/<a href="datum/poll_option.html">poll_option</a>/option)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/poll_management.dm#L542"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 542"></a></aside></h3><p>Processes topic data from poll option panel.</p>
<p>Reads through returned form data and assigns data to the option datum, creating a new one if required, before passing it to be saved.
Also does some simple error checking to ensure the option will be valid before creation.</p><h3 id="proc/poll_parse_href"><aside class="declaration">proc </aside>poll_parse_href<aside>(/list/href_list, /<a href="datum.html">datum</a>/<a href="datum/poll_question.html">poll_question</a>/poll)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/poll_management.dm#L244"><img src="git.png" width="16" height="16" title="code/modules/admin/poll_management.dm 244"></a></aside></h3><p>Processes topic data from poll management panel.</p>
<p>Reads through returned form data and assigns data to the poll datum, creating a new one if required, before passing it to be saved.
Also does some simple error checking to ensure the poll will be valid before creation.</p><h3 id="proc/rank_flags"><aside class="declaration">proc </aside>rank_flags<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L412"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 412"></a></aside></h3><p>Get the rank flags of the admin</p><h3 id="proc/rank_names"><aside class="declaration">proc </aside>rank_names<aside>()  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L408"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 408"></a></aside></h3><p>Get the rank name of the admin</p><h3 id="proc/reban"><aside class="declaration">proc </aside>reban<aside>(ban_id, applies_to_admins, player_key, player_ip, player_cid, role, page, admin_key)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/sql_ban_system.dm#L900"><img src="git.png" width="16" height="16" title="code/modules/admin/sql_ban_system.dm 900"></a></aside></h3><p>Sometimes an admin did not intend to unban a player. This proc undoes an unbanning operation by setting the unbanned_ keys in the DB back to null.</p><h3 id="proc/remove_tagged_datum"><aside class="declaration">proc </aside>remove_tagged_datum<aside>(/<a href="datum.html">datum</a>/target_datum, silent)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/tag.dm#L31"><img src="git.png" width="16" height="16" title="code/modules/admin/tag.dm 31"></a></aside></h3><p>Attempts to remove the specified datum from <a href="datum/admins.html#var/tagged_datums" title="/datum/admins">/datum/admins/var/tagged_datums</a> if it exists</p>
<p>Arguments:</p>
<ul>
<li>target_datum - The datum you want to remove from the tagged_datums list</li>
<li>silent - If TRUE, won't print messages to the owner's chat</li>
</ul><h3 id="proc/verify_admin_from_local_cache"><aside class="declaration">proc </aside>verify_admin_from_local_cache<aside>(/<a href="client.html">client</a>/client)  <a href="https://github.com/Skyrat-SS13/Skyrat-tg/blob/e507f9120bb0c3beecfe169d14193d90e7229a58/code/modules/admin/holder2.dm#L324"><img src="git.png" width="16" height="16" title="code/modules/admin/holder2.dm 324"></a></aside></h3><p>Returns true if the admin's cid/ip is verified in the local cache</p></main><footer>tgstation.dme <a href="https://github.com/Skyrat-SS13/Skyrat-tg/tree/e507f9120bb0c3beecfe169d14193d90e7229a58">e507f91</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.9.0</a></footer></body></html>